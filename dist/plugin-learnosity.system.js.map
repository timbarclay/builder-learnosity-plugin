{"version":3,"file":"plugin-learnosity.system.js","sources":["../src/LearnosityActivityPicker.tsx","../src/LearnosityCredentialsDialog.tsx","../src/LearnosityEditor.tsx"],"sourcesContent":["/** @jsx jsx */\nimport React, { Fragment, useEffect, useState } from 'react';\nimport { jsx } from '@emotion/core';\nimport { Dialog, Button, DialogActions } from '@material-ui/core';\n\ninterface LearnosityPickerDialogProps {\n  openDialog: boolean;\n  closeDialog(): void;\n  selectActivity(activity: LearnosityActivity): void;\n  initUrl: string | undefined;\n}\n\nexport interface LearnosityActivity {\n  reference: string;\n}\n\nexport function LearnosityActivityPickerDialog(props: LearnosityPickerDialogProps) {\n  const [libraryLoaded, setLibraryLoaded] = useState(false)\n  const [begunLibraryLoad, setBegunLibraryLoad] = useState(false)\n  const [learnosityRequest, setLearnosityRequest] = useState<any>(null)\n  const [learnosityRequestBegun, setLearnosityRequestBegun] = useState(false)\n  const [rendered, setRendered] = useState(false)\n\n  useEffect(() => {\n    if (!rendered || begunLibraryLoad) return\n    setBegunLibraryLoad(true)\n\n    loadJS('https://authorapi.learnosity.com?v2025.1.LTS', () => {\n      console.log('Library loaded')\n      setLibraryLoaded(true)\n    })\n  }, [rendered, begunLibraryLoad])\n\n  useEffect(() => {\n    if (learnosityRequestBegun) return\n    setLearnosityRequestBegun(true)\n\n    fetch(props.initUrl ?? '', {\n      method: 'POST',\n      body: JSON.stringify({\n        domain: location.hostname,\n        request: {\n          mode: 'activity_list',\n          user: {\n            id: 'demos-site',\n            firstname: 'Demos',\n            lastname: 'User',\n            email: 'demos@learnosity.com',\n          },\n        },\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLearnosityRequest(data.request)\n      })\n  }, [learnosityRequestBegun])\n\n  useEffect(() => {\n    if (!libraryLoaded || !window.LearnosityAuthor) {\n      console.log('LearnosityAuthor not loaded')\n      return\n    }\n    if (!learnosityRequest) {\n      console.log('learnosityRequest not found')\n      return\n    }\n\n    console.debug('Initializing LearnosityItems')\n    const authorApi = window.LearnosityAuthor.init(learnosityRequest, {\n      readyListener: () => {\n        console.log('readyListener')\n\n        authorApi.on('open:activity', (event: any) => {\n          console.log('open:activity', event.data)\n          props.selectActivity(event.data)\n        })\n\n        authorApi.on('save:activity:success', (event: any) => {\n          props.selectActivity(event.data)\n        })\n      },\n      errorListener: (error: any) => {\n        console.error('errorListener', error)\n      },\n    })\n  }, [libraryLoaded, learnosityRequest])\n  \n  return (\n    <Dialog\n      open={props.openDialog}\n      onClose={props.closeDialog}\n      fullWidth={true}\n      maxWidth=\"lg\"\n      onRendered={() => {\n        setRendered(true)\n      }}\n    >\n      <div id=\"learnosity-author\" css={{ height: '90vh' }} />\n      <DialogActions>\n        <Button autoFocus onClick={props.closeDialog} color=\"primary\">\n          Close learnosity\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport function loadJS(url: string, callback: () => void) {\n  const existingScript = document.getElementById('learnosity-library')\n  if (!existingScript) {\n    const script = document.createElement('script')\n    script.src = url\n    script.id = 'learnosity-library'\n    document.body.appendChild(script)\n    script.onload = () => {\n      if (callback) {\n        return callback()\n      }\n      return true\n    }\n  }\n  if (existingScript && callback) {\n    return callback()\n  }\n  return true\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport React from 'react';\nimport {\n  Dialog,\n  Button,\n  DialogActions,\n  DialogTitle,\n  DialogContent,\n  TextField,\n} from '@material-ui/core';\n\ninterface LearnosityCredentialsDialogProps {\n  openDialog: boolean;\n  initUrl: string | undefined;\n  closeDialog(): void;\n  updateLearnosityCredentials(initUrl: string): void;\n}\n\ninterface LearnosityCredentialsDialogState {\n  initUrl: string;\n}\n\nexport default class LearnosityCredentialsDialog extends React.Component<\n  LearnosityCredentialsDialogProps,\n  LearnosityCredentialsDialogState\n> {\n  constructor(props: LearnosityCredentialsDialogProps) {\n    super(props);\n    this.state = {\n      initUrl: this.props.initUrl ? this.props.initUrl : '',\n    };\n  }\n\n  render() {\n    return (\n      <div>\n        <Dialog open={this.props.openDialog} onClose={this.props.closeDialog}>\n          <DialogTitle>Learnosity credentials setup</DialogTitle>\n          <DialogContent>\n            <TextField\n              value={this.state.initUrl}\n              onChange={(e: any) => this.setState({ initUrl: e.target.value })}\n              id=\"apiKey\"\n              label=\"Initialisation URL\"\n              helperText=\"An API endpoint that will return a Learnosity request JSON object\"\n              margin=\"normal\"\n              autoComplete=\"off\"\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.props.closeDialog} color=\"primary\">\n              Close\n            </Button>\n            <Button\n              onClick={() => {\n                this.props.updateLearnosityCredentials(this.state.initUrl);\n                this.props.closeDialog();\n              }}\n              color=\"primary\"\n              variant=\"contained\"\n            >\n              Save\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n","/** @jsx jsx */\nimport React from 'react';\nimport { jsx } from '@emotion/core';\nimport { Builder } from '@builder.io/sdk';\nimport { Typography, Button } from '@material-ui/core';\nimport { LearnosityActivityPickerDialog, LearnosityActivity } from './LearnosityActivityPicker';\nimport LearnosityCredentialsDialog from './LearnosityCredentialsDialog';\n\ninterface Props {\n  value?: any;\n  onChange(newValue: LearnosityActivity): void;\n  context: any;\n}\n\ninterface LearnosityEditorState {\n  showDialog: boolean;\n  initUrl: string | undefined;\n  requestCredentials: boolean;\n  selectedActivityReference: string | undefined;\n}\n\ntype ButtonVariant = 'text' | 'contained';\n\nexport default class LearnosityEditor extends React.Component<\n  Props,\n  LearnosityEditorState\n> {\n  get organization() {\n    return this.props.context.user.organization;\n  }\n\n  get learnosityInitUrl(): string | undefined {\n    return this.organization.value.settings.plugins.get('learnosityInitUrl');\n  }\n\n  set learnosityInitUrl(key: string | undefined) {\n    this.organization.value.settings.plugins.set('learnosityInitUrl', key);\n    this.organization.save();\n  }\n\n  constructor(props: any) {\n    super(props);\n\n    this.state = {\n      requestCredentials: false,\n      showDialog: false,\n      initUrl: this.learnosityInitUrl ? this.learnosityInitUrl : '',\n      selectedActivityReference:\n        props.value && props.value.get && props.value.get('reference')\n          ? props.value.get('reference')\n          : '',\n    };\n  }\n\n  private closeDialog() {\n    this.setState({\n      requestCredentials: false,\n      showDialog: false,\n    });\n  }\n\n  private areLearnosityCredentialsNotSet(): boolean {\n    return (\n      this.state.initUrl === '' ||\n      this.state.initUrl === undefined\n    );\n  }\n\n  private shouldRequestLearnosityCredentials() {\n    return this.state.requestCredentials || this.areLearnosityCredentialsNotSet();\n  }\n\n  private updateLearnosityCredentials(initUrl: string) {\n    this.learnosityInitUrl = initUrl;\n    this.setState({\n      initUrl: this.learnosityInitUrl,\n    });\n  }\n\n  private calculateChooseActivityButtonVariant(): ButtonVariant {\n    return this.areLearnosityCredentialsNotSet() ? 'contained' : 'text';\n  }\n\n  private selectActivity(activity: LearnosityActivity) {\n    this.props.onChange(activity);\n    this.setState({ selectedActivityReference: activity.reference });\n  }\n\n  buildSelectedIdMessage(): string {\n    if (this.state.selectedActivityReference) {\n      return `Activity reference: ${this.state.selectedActivityReference}`;\n    }\n\n    return 'Please choose an activity';\n  }\n\n  buildChooseActivityText(): string {\n    if (this.state.selectedActivityReference) {\n      return `UPDATE ACTIVITY`;\n    }\n\n    return 'CHOOSE ACTIVITY';\n  }\n\n  setCredentialsButtonText(): string {\n    return this.areLearnosityCredentialsNotSet() ? 'Set credentials' : '...';\n  }\n\n  render() {\n    const shouldRequestLearnositySettings = this.shouldRequestLearnosityCredentials();\n    const setCredentialsButtonVariant = this.calculateChooseActivityButtonVariant();\n    const selectedActivityReferenceMessage = this.buildSelectedIdMessage();\n    const chooseActivityButtonText = this.buildChooseActivityText();\n    const setCredentialsButtonText = this.setCredentialsButtonText();\n    const buttonContainerStyle = {\n      display: 'grid',\n      gap: '10px',\n      gridTemplateColumns: '1fr max-content',\n      marginTop: '5px',\n      marginBottom: '5px',\n    };\n    return (\n      <div css={{ padding: '15px 0' }}>\n        <Typography variant=\"caption\">Learnosity activity picker</Typography>\n        {shouldRequestLearnositySettings && (\n          <LearnosityCredentialsDialog\n            openDialog={this.state.showDialog}\n            closeDialog={this.closeDialog.bind(this)}\n            updateLearnosityCredentials={this.updateLearnosityCredentials.bind(this)}\n            initUrl={this.state.initUrl}\n          />\n        )}\n        {!shouldRequestLearnositySettings && (\n          <LearnosityActivityPickerDialog\n            openDialog={this.state.showDialog}\n            closeDialog={this.closeDialog.bind(this)}\n            selectActivity={this.selectActivity.bind(this)}\n            initUrl={this.state.initUrl}\n          />\n        )}\n\n        <div css={buttonContainerStyle}>\n          <Button\n            disabled={this.areLearnosityCredentialsNotSet()}\n            color=\"primary\"\n            variant=\"contained\"\n            onClick={() => {\n              this.setState({\n                showDialog: !this.state.showDialog,\n              });\n            }}\n          >\n            {chooseActivityButtonText}\n          </Button>\n\n          <Button\n            variant={setCredentialsButtonVariant}\n            color=\"primary\"\n            onClick={() => {\n              this.setState({\n                requestCredentials: true,\n                showDialog: !this.state.showDialog,\n              });\n            }}\n          >\n            {setCredentialsButtonText}\n          </Button>\n        </div>\n        <div>\n          <Typography css={{ margin: '5px' }} variant=\"caption\">\n            {selectedActivityReferenceMessage}\n          </Typography>\n        </div>\n      </div>\n    );\n  }\n}\n\nBuilder.registerEditor({\n  name: 'learnosityEditor',\n  component: LearnosityEditor,\n});\n"],"names":[],"mappings":"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"}S,EAClD,EAAA,gCAAgC,CACtB,CACT,CACF,EACN;OACH;EACF,CAAA;AAEDC,aAAO,CAAC,cAAc,CAAC;EACrB,IAAA,IAAI,EAAE,kBAAkB;EACxB,IAAA,SAAS,EAAE,gBAAgB;EAC5B,CAAA,CAAC;;;;;;;;"}